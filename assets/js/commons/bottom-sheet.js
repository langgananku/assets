!function(e){e.fn.sheet=function(o){const t=e.extend({openSheetButton:"#open_sheet",addToCartButton:"",pageOne:"",toPageTwoButton:"",pageTwo:"",sheet:"#sheet",fullscreen:!1,contents:".contents"},o);let s,n={};const c=e(t.openSheetButton),i=e(t.addToCartButton),d=e(t.toPageTwoButton),a=e(t.pageOne),l=e(t.pageTwo),r=t.addToCartButton,h=e(t.sheet),u=e(t.contents),w=t.fullscreen,p=h.find(".contents"),y=h.find(".contents"),f=h.find(".body");let v,g,b=!1,m=!1;const B=e=>{v=Math.max(0,Math.min(100,e)),p.css("height",`${v}vh`),100===v?p.addClass("fullscreen"):p.removeClass("fullscreen")};function k(e){n=e}const T=o=>{h.attr("aria-hidden",String(!o)),m=o,o?(document.documentElement.style.overscrollBehavior="none",document.body.style.overscrollBehavior="none",e("body").css({overflow:"hidden",position:"fixed",width:"100%"}),C(),window.history.pushState({sheetOpen:!0},""),k(history.state)):(document.documentElement.style.overscrollBehavior="",document.body.style.overscrollBehavior="",e("body").css({overflow:"",position:"",width:""}),x())},C=()=>{""!=r&&(c.hide(),i.css({display:"flex"}))},x=()=>{""!=r&&(i.hide(),c.css({display:"flex"}))};let Y;d.on("click",(()=>{l.css({display:"flex"}),a.css({display:"none"}),window.history.pushState({pageTwoOpen:!0},""),k(history.state)})),c.on("click",(()=>{if(!m){p.css("height","auto"),T(!0),g=u.height();const o=e(window).height();v=g/o*100,s=Math.round(v),w&&(s=100),B(s),f.css("overflow","hidden"),(s>70||w)&&(B(100),v=100,f.css("overflow-y","auto"))}})),h.find(".close-sheet").on("click",(()=>{T(!1),p.removeClass("fullscreen"),window.history.back()})),h.find(".overlay").on("click",(()=>{T(!1),window.history.back()})),window.addEventListener("popstate",(function(e){n&&(n.sheetOpen&&m?(T(!1),k(e.state)):n.pageTwoOpen&&(l.css({display:"none"}),a.css({display:"flex"}),k(e.state)))})),e(window).on("keyup",(e=>{"Escape"===e.key&&(T(!1),window.history.back())}));y.on("mousedown touchstart",(o=>{Y=o.touches?o.touches[0].pageY:o.pageY,p.addClass("not-selectable"),y.css("cursor","grabbing"),e("body").css("cursor","grabbing"),b=!0,touchStartY=o.touches?o.touches[0].clientY:o.clientY,e("body").css("overflow","hidden")})),e(window).on("mousemove touchmove",(o=>{if(!b||void 0===Y)return;const t=o.touches?o.touches[0].pageY:o.pageY,s=Y-t;let n=Math.round(v+s/e(window).height()*100);n>=0&&n<=100&&(B(n),Y=t)})),e(window).on("mouseup touchend",(()=>{b&&(Y=void 0,p.removeClass("not-selectable"),y.css("cursor",""),e("body").css("cursor",""),b=!1,v<s-10?(T(!1),window.history.back()):B(v>s+10?100:s),m&&e("body").css("overflow","auto"))}))}}(jQuery);